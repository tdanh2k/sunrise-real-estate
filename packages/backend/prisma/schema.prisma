generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

model DraftPost {
  Id                    String                  @id(map: "DraftPost_PK") @db.UniqueIdentifier
  Idx                   Int                     @default(autoincrement())
  Code                  String?                 @db.VarChar(100)
  Title                 String                  @db.NVarChar(255)
  Description           String                  @db.NVarChar(Max)
  UserId                String                  @db.VarChar(255)
  TypeId                String                  @db.UniqueIdentifier
  CreatedDate           DateTime?               @default(dbgenerated("sysdatetimeoffset()"), map: "DF__DraftPost__Creat__6EF57B66") @db.DateTimeOffset
  PostType              PostType                @relation(fields: [Id], references: [Id], onUpdate: NoAction, map: "DraftPost_PostType_FK")
  DraftPostCurrentParam DraftPostCurrentParam[]
  DraftPostImage        DraftPostImage[]
}

model DraftPostCurrentParam {
  DraftId   String    @db.UniqueIdentifier
  ParamId   String    @db.UniqueIdentifier
  Value     String    @db.NVarChar(255)
  Id        String    @id(map: "DraftPostCurrentParam_PK") @db.UniqueIdentifier
  DraftPost DraftPost @relation(fields: [DraftId], references: [Id], onDelete: Cascade, onUpdate: NoAction, map: "DraftPostCurrentParam_DraftPost_FK")
  PostParam PostParam @relation(fields: [ParamId], references: [Id], onUpdate: NoAction, map: "DraftPostCurrentParam_PostParam_FK")
}

model DraftPostImage {
  Id          String    @id(map: "DraftPostImage_PK") @db.UniqueIdentifier
  Name        String    @db.NVarChar(255)
  Size        Int?
  MimeType    String?   @db.VarChar(100)
  Path        String    @db.NVarChar(255)
  DraftId     String    @db.UniqueIdentifier
  CreatedDate DateTime? @default(dbgenerated("sysdatetimeoffset()"), map: "DF__DraftPost__Creat__72C60C4A") @db.DateTimeOffset
  DraftPost   DraftPost @relation(fields: [DraftId], references: [Id], onUpdate: NoAction, map: "DraftPostImage_DraftPost_FK")
}

model Post {
  Id               String             @id(map: "Post_PK") @db.UniqueIdentifier
  Idx              Int                @default(autoincrement())
  Code             String?            @db.VarChar(100)
  Title            String?            @db.NVarChar(100)
  Description      String?            @db.NVarChar(Max)
  UserId           String             @db.VarChar(255)
  CreatedDate      DateTime?          @default(dbgenerated("sysdatetimeoffset()"), map: "DF__Post__CreatedDat__628FA481") @db.DateTimeOffset
  TypeId           String             @db.UniqueIdentifier
  PostType         PostType           @relation(fields: [TypeId], references: [Id], onUpdate: NoAction, map: "Post_PostType_FK")
  PostCurrentParam PostCurrentParam[]
  PostImage        PostImage[]
}

model PostCurrentParam {
  PostId    String    @db.UniqueIdentifier
  ParamId   String    @db.UniqueIdentifier
  Value     String    @db.NVarChar(255)
  Id        String    @id(map: "PostCurrentParam_PK") @db.UniqueIdentifier
  Post      Post      @relation(fields: [PostId], references: [Id], onDelete: Cascade, onUpdate: NoAction, map: "PostCurrentParam_Post_FK")
  PostParam PostParam @relation(fields: [ParamId], references: [Id], onUpdate: NoAction, map: "PostCurrentParam_PostParam_FK")
}

model PostImage {
  Id          String    @id(map: "PostImage_PK") @db.UniqueIdentifier
  Name        String    @db.NVarChar(255)
  Size        Int?
  Path        String    @db.NVarChar(255)
  PostId      String    @db.UniqueIdentifier
  CreatedDate DateTime? @default(dbgenerated("sysdatetimeoffset()"), map: "DF__PostImage__Creat__66603565") @db.DateTimeOffset
  MimeType    String?   @db.VarChar(100)
  Post        Post      @relation(fields: [PostId], references: [Id], onDelete: Cascade, onUpdate: NoAction, map: "PostImage_Post_FK")
}

model PostParam {
  Id                    String                  @id(map: "PostUnit_PK") @db.UniqueIdentifier
  Idx                   Int                     @default(autoincrement())
  Code                  String                  @db.VarChar(100)
  Name                  String                  @db.NVarChar(255)
  Unit                  String                  @db.NVarChar(255)
  CreatedDate           DateTime?               @default(dbgenerated("sysdatetimeoffset()"), map: "DF__PostParam__Creat__6A30C649") @db.DateTimeOffset
  DraftPostCurrentParam DraftPostCurrentParam[]
  PostCurrentParam      PostCurrentParam[]
}

model PostType {
  Id          String     @id(map: "PostType_PK") @db.UniqueIdentifier
  Idx         Int        @default(autoincrement())
  Name        String     @db.NVarChar(256)
  CreatedDate DateTime?  @db.DateTimeOffset
  DraftPost   DraftPost?
  Post        Post[]
}
